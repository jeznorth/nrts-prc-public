<div class="popup-content" *ngIf="app">
  <div class="file-number">Crown Land File: {{app['clFile'] || '-'}}</div>

  <div>
    <div class="applicant-name">{{app.client || '-'}}</div>
    <div class="purpose">{{app.purpose | lowercase}} {{app.subpurpose | lowercase}}</div>
  </div>

  <ul class="status-container">
    <li *ngVar="commentPeriodService.getStatusString(app.cpStatusCode) as cpStatus">
      <i class="material-icons" title="{{app.cpStatus}}">
        {{commentPeriodService.isOpen(app.cpStatusCode) ? 'comment' : 'highlight_off'}}
      </i>
      <span>{{cpStatus}}</span>
    </li>
    <li *ngVar="applicationService.getStatusCode(app.status) as appStatusCode">
      <!-- Application Under Review -->
      <i class="material-icons" title="{{app.appStatus}}"
        *ngIf="applicationService.isAccepted(appStatusCode)">
        access_time
      </i>
      <!-- Decision: Allowed -->
      <i class="material-icons" title="{{app.appStatus}}"
        *ngIf="applicationService.isAllowed(appStatusCode)">
        error_outline
      </i>
      <!-- Tenure: Disposition in Good Standing / Decision: Offered / Decision: Offer Accepted -->
      <i class="material-icons" title="{{app.appStatus}}"
        *ngIf="applicationService.isDispGoodStanding(appStatusCode)
          || applicationService.isOffered(appStatusCode)
          || applicationService.isOfferAccepted(appStatusCode)">
        check
      </i>
      <!-- Application Cancelled / Application Abandoned / Decision: Offer Not Accepted -->
      <i class="material-icons" title="{{app.appStatus}}"
        *ngIf="applicationService.isCancelled(appStatusCode)
        || applicationService.isAbandoned(appStatusCode)
        || applicationService.isOfferNotAccepted(appStatusCode)">
        cancel
      </i>
      <!-- Decision: Not Approved / Tenure: Suspended-->
      <i class="material-icons" title="{{app.appStatus}}"
        *ngIf="applicationService.isDisallowed(appStatusCode)
        || applicationService.isSuspended(appStatusCode)">
        warning
      </i>
      <!-- Unknown Application Status -->
      <i class="material-icons" title="{{app.appStatus}}"
        *ngIf="applicationService.isUnknown(appStatusCode)">
        warning
      </i>
      <span>{{app.appStatus}}</span>
    </li>
  </ul>

  <button class="app-link btn btn-sm btn-primary" [routerLink]="['/a', app._id]">View Application Details</button>
</div>